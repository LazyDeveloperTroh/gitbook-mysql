---
description: MySQL 서버는 프로세스 기반이 아니라 스레드 기반으로 작동하며 크게 포그라운드 스레드와 백그라운드 스레드로 구분된다.
---

# 스레딩 구조

#### 포그라운드 스레드

<mark style="background-color:blue;">**포그라운드 스레드는 최소한 MySQL 서버에 접속된 클라언트의 수만큼 존재하며, 주로 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리한다**</mark>. 클라이언트 사용자가 작업을 마치고 커넥션을 종료하면 해당 커넥션을 담당하던 스레드는 다시 스레드 캐시로 되돌아간다. <mark style="background-color:orange;">**이 때 이미 스레드 캐시에 일정 개수 이상의 대기 중인 스레드가 있으면 스레드 캐시에 넣지 않고 스레드를 종료시켜 일정 개수의 스레드만 스레드 캐시에 존재하게 된다.**</mark>\


포그라운드  스레드는 데이터를 MySQL 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우에는 직접 디스크의 데이터나 인덱스 파일로부터 데이터를 읽어와서 작업을 처리한다. <mark style="background-color:orange;">**MyISAM 테이블은 디스크 쓰기 작업까지 포그라운드 스레드가 처리하지만 InnoDB 테이블은 데이터 버퍼나 캐시까지만 포그라운드 스레드가 처리하고 나머지 버퍼로부터 디스크까지 기록하는 작업은 백그라운드 스레드가 처리한다.**</mark>



#### 백그라운드 스레드

InnoDB 엔진에서 백그라운드 스레드는 "인서트 버퍼를 병합하는 스레드", "<mark style="background-color:blue;">**로그를 디스크로 기록하는 스레드**</mark>", "<mark style="background-color:blue;">**InnoDB 버퍼 풀의 데이터를 디스크에 기록하는 스레드**</mark>", "데이터를 버퍼로 읽어오는 스레드", "잠금이나 데드락을 모니터링하는 스레드" 의 역할을 한다.

\
일반적인 상용 DBMS 에는 대부분 쓰기 작업을 버퍼링해서 일괄 처리하도록 되어있다. 때문에 INSERT, UPDATE, DELETE 쿼리로 데이터가 변경되는 경우 디스크의 데이터 파일로 완전히 저장될 때까지 기다리지 않아도 된다.
